# LiteXLoader - 数据库和配置文件 API

[<< 返回目录](README.md)

配置文件和数据库是插件开发过程中非常重要的组成部分。  
下面提供了相应的API接口，方便开发者专注于业务代码实现而非纠结于某些技术细节。  

## 配置文件

LXL提供了非常方便的统一配置文件接口和数据库接口，方便开发者储存和读取重要的配置数据。  
当然，你也可以手动读写文件来协助相关配置文件的操作。  

### 初始化配置文件模块

在使用内置的统一配置文件模块之前，LXL需要初始化相关的配置。  
传入插件的名字（和可选的配置文件类型）之后，如果目标文件不存在，引擎将在 `BDS根目录/plugins/插件名字/` 目录下建立名为config的配置文件。  
配置文件类型默认为`json`，当然你也可以修改为`ini`格式。

`conf.init(name[,format])`

- 参数：
  - name : `String`  
    你的插件名字，引擎根据名字创建配置文件目录
  - format : `String`  
    （可选参数）配置文件的格式，字符串形式。可选项有 `json ` / ` ini`   
    如果不传入此参数，默认为 `json` 格式
- 返回值：无

注：配置文件格式的选择将影响你可以储存的配置数据类型。  
json格式可以储存**绝大多数**类型的数据，包括数组、对象等；  
ini格式相对**简单直观**，修改起来比较轻松，不过储存的数据类型受到一定限制

<br>

### 读写配置文件

统一配置文件初始化完毕之后，就可以使用API接口方便地读写

#### 读取配置项

`conf.get(name)`

- 参数：
  - name : `String`  
    配置项名字
- 返回值：配置文件中储存的这个配置项的数据
- 返回值类型：`任意类型`，以具体储存的数据类型为准
  - 如返回值为 `Null` 则表示配置项不存在

<br>

#### 写入配置项

`conf.set(name,data)`

- 参数：
  - name : `String`  
    配置项名字
    
  - data : `任意类型`  
    要写入的配置数据。允许的配置数据类型如下  

    | 配置文件格式      | 允许储存的数据类型                                      |
    | ----------------- | ------------------------------------------------------- |
    | json 格式（默认） | `Integer` `Float` `String` `Boolean` `Array` `Object `* |
    | ini 格式          | `Integer` `Float` `String` `Boolean`                    |

    \* 其中，`Array` 和 `Object` 内部仅能嵌套表中提到的这些允许的元素

- 返回值：是否写入成功

- 返回值类型：`Boolean`

<br>

#### 重新加载文件中的配置项

`conf.reload()`

- 返回值：无

为了性能考虑，统一配置文件接口对读操作进行缓存，每次读取操作都从直接内存中读取，而写入才会直接写入磁盘文件。考虑到配置文件可能被用户修改，当你确认用户已经修改配置文件之后，需要使用此函数刷新统一配置文件的内存缓存数据。

## 数据库

<br>

[<< 返回目录](README.md)